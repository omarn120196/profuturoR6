<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página 01 | I4L</title>
</head>
<body class="pagina-interna">
    <img class="elementos" id="titulo" src="./img/pagina04/titulo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="instrucciones" src="./img/pagina04/instrucciones.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="frase1" src="./img/pagina04/frase1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="frase2" src="./img/pagina04/frase2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="frase3" src="./img/pagina04/frase3.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="frase4" src="./img/pagina04/frase4.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="casillas1" src="./img/pagina04/casillas1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="casillas2" src="./img/pagina04/casillas2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="casillas3" src="./img/pagina04/casillas3.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="casillas4" src="./img/pagina04/casillas4.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="marco" src="./img/pagina04/marco.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="base" src="./img/pagina04/base.png" data-posX="0" data-posY="0" alt="">

    <!-- Cancelación -->
    <img class="elementos" id="vacia1_1" src="./img/pagina04/vacia.png" data-posX="417" data-posY="352" alt="">
    <img class="elementos" id="vacia1_2" src="./img/pagina04/vacia.png" data-posX="470" data-posY="352" alt="">
    <img class="elementos" id="vacia1_3" src="./img/pagina04/vacia.png" data-posX="523" data-posY="352" alt="">
    <img class="elementos" id="vacia1_4" src="./img/pagina04/vacia.png" data-posX="577" data-posY="352" alt="">
    <img class="elementos" id="vacia1_5" src="./img/pagina04/vacia.png" data-posX="683" data-posY="352" alt="">
    <img class="elementos" id="vacia1_6" src="./img/pagina04/vacia.png" data-posX="737" data-posY="352" alt="">

    <img class="elementos" id="cancelacionA" src="./img/pagina04/cancelacionA.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cancelacionN" src="./img/pagina04/cancelacionN.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cancelacionC" src="./img/pagina04/cancelacionC.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cancelacionL" src="./img/pagina04/cancelacionL.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos" id="brazo1_1" src="./img/pagina04/brazo1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="brazo2_1" src="./img/pagina04/brazo2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cuerpo1" src="./img/pagina04/cuerpo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna1_1" src="./img/pagina04/pierna1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna2_1" src="./img/pagina04/pierna2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cabeza1" src="./img/pagina04/cabeza.png" data-posX="0" data-posY="0" alt="">

    <!-- Rectificación -->
    <img class="elementos" id="vacia2_1" src="./img/pagina04/vacia2.png" data-posX="408" data-posY="360" alt="">
    <img class="elementos" id="vacia2_2" src="./img/pagina04/vacia2.png" data-posX="500" data-posY="360" alt="">
    <img class="elementos" id="vacia2_3" src="./img/pagina04/vacia2.png" data-posX="546" data-posY="360" alt="">
    <img class="elementos" id="vacia2_4" src="./img/pagina04/vacia2.png" data-posX="638" data-posY="360" alt="">
    <img class="elementos" id="vacia2_5" src="./img/pagina04/vacia2.png" data-posX="730" data-posY="360" alt="">
    <img class="elementos" id="vacia2_6" src="./img/pagina04/vacia2.png" data-posX="776" data-posY="360" alt="">

    <img class="elementos" id="rectificacionA" src="./img/pagina04/rectificacionA.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="rectificacionC" src="./img/pagina04/rectificacionC.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="rectificacionF" src="./img/pagina04/rectificacionF.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="rectificacionR" src="./img/pagina04/rectificacionR.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="rectificacionT" src="./img/pagina04/rectificacionT.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos" id="brazo1_2" src="./img/pagina04/brazo1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="brazo2_2" src="./img/pagina04/brazo2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cuerpo2" src="./img/pagina04/cuerpo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna1_2" src="./img/pagina04/pierna1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna2_2" src="./img/pagina04/pierna2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cabeza2" src="./img/pagina04/cabeza.png" data-posX="0" data-posY="0" alt="">

    <!-- Oposición -->
    <img class="elementos" id="vacia3_1" src="./img/pagina04/vacia.png" data-posX="457" data-posY="352" alt="">
    <img class="elementos" id="vacia3_2" src="./img/pagina04/vacia.png" data-posX="565" data-posY="352" alt="">
    <img class="elementos" id="vacia3_3" src="./img/pagina04/vacia.png" data-posX="618" data-posY="352" alt="">
    <img class="elementos" id="vacia3_4" src="./img/pagina04/vacia.png" data-posX="672" data-posY="352" alt="">

    <img class="elementos" id="oposicionI" src="./img/pagina04/oposicionI.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="oposicionO" src="./img/pagina04/oposicionO.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="oposicionS" src="./img/pagina04/oposicionS.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos" id="brazo1_3" src="./img/pagina04/brazo1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="brazo2_3" src="./img/pagina04/brazo2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cuerpo3" src="./img/pagina04/cuerpo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna1_3" src="./img/pagina04/pierna1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna2_3" src="./img/pagina04/pierna2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cabeza3" src="./img/pagina04/cabeza.png" data-posX="0" data-posY="0" alt="">

    <!-- Acceso -->
    <img class="elementos" id="vacia4_1" src="./img/pagina04/vacia4.png" data-posX="535" data-posY="352" alt="">
    <img class="elementos" id="vacia4_2" src="./img/pagina04/vacia4.png" data-posX="589" data-posY="352" alt="">
    <img class="elementos" id="vacia4_3" src="./img/pagina04/vacia4.png" data-posX="695" data-posY="352" alt="">
    <img class="elementos" id="vacia4_4" src="./img/pagina04/vacia4.png" data-posX="749" data-posY="352" alt="">
    <img class="elementos" id="vacia4_5" src="./img/pagina04/vacia4.png" data-posX="802" data-posY="352" alt="">

    <img class="elementos" id="accesoA" src="./img/pagina04/accesoA.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="accesoC" src="./img/pagina04/accesoC.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="accesoE" src="./img/pagina04/accesoE.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="accesoO" src="./img/pagina04/accesoO.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="accesoS" src="./img/pagina04/accesoS.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos" id="brazo1_4" src="./img/pagina04/brazo1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="brazo2_4" src="./img/pagina04/brazo2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cuerpo4" src="./img/pagina04/cuerpo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna1_4" src="./img/pagina04/pierna1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pierna2_4" src="./img/pagina04/pierna2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="cabeza4" src="./img/pagina04/cabeza.png" data-posX="0" data-posY="0" alt="">

    <!-- Retro Positiva -->
    <img class="elementos" id="positiva" src="./img/pagina04/positiva.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="concepto1" src="./img/pagina04/concepto1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="concepto2" src="./img/pagina04/concepto2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="concepto3" src="./img/pagina04/concepto3.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="concepto4" src="./img/pagina04/concepto4.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="retroP" src="./img/pagina04/retroP.png" data-posX="0" data-posY="0" alt="">

    <!-- Retro Negativa -->
    <img class="elementos" id="retroN" src="./img/pagina04/retroN.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="btnReintentar" src="./img/pagina04/btnReintentar.png" data-posX="660" data-posY="428" alt="">
    <!-- Script de la página -->
    <script type="module">

        // Importaciones---------------------------------------------------
        import {aplicacion} from './js/app.js';
        import {cargando} from './js/funciones.js';
        import {animacionEntrada, parpadea, animacionSalida, pararParpadear} from './js/animaciones.js';

        // Cargar Audios------------------------------------------------------
        const audio = [
            new Audio('./audios/R6_04_1.mp3'),
            new Audio('./audios/R6_04_2.mp3'),
            new Audio('./audios/R6_04_3.mp3'),
            new Audio('./audios/R6_04_4.mp3'),
            new Audio('./audios/R6_04_5.mp3'),
            new Audio('./audios/R6_04_6.mp3'),
            new Audio('./audios/R6_04_7.mp3'),
            new Audio('./audios/R6_04_8.mp3')
        ]

        //Variables
        const titulo = $('#titulo');
        const instrucciones = $('#instrucciones');
        const marco = $('#marco');
        const base = $('#base');

        const frase1 = $('#frase1');
        const casillas1 = $('#casillas1');
        const brazo1_1 = $('#brazo1_1');
        const brazo2_1 = $('#brazo2_1');
        const pierna1_1 = $('#pierna1_1');
        const pierna2_1 = $('#pierna2_1');
        const cabeza1 = $('#cabeza1');
        const cuerpo1 = $('#cuerpo1');

        const frase2 = $('#frase2');
        const casillas2 = $('#casillas2');
        const brazo1_2 = $('#brazo1_2');
        const brazo2_2 = $('#brazo2_2');
        const pierna1_2 = $('#pierna1_2');
        const pierna2_2 = $('#pierna2_2');
        const cabeza2 = $('#cabeza2');
        const cuerpo2 = $('#cuerpo2');

        const frase3 = $('#frase3');
        const casillas3 = $('#casillas3');
        const brazo1_3 = $('#brazo1_3');
        const brazo2_3 = $('#brazo2_3');
        const pierna1_3 = $('#pierna1_3');
        const pierna2_3 = $('#pierna2_3');
        const cabeza3 = $('#cabeza3');
        const cuerpo3 = $('#cuerpo3');

        const frase4 = $('#frase4');
        const casillas4 = $('#casillas4');
        const brazo1_4 = $('#brazo1_4');
        const brazo2_4 = $('#brazo2_4');
        const pierna1_4 = $('#pierna1_4');
        const pierna2_4 = $('#pierna2_4');
        const cabeza4 = $('#cabeza4');
        const cuerpo4 = $('#cuerpo4');

        const positiva = $('#positiva');
        const concepto1 = $('#concepto1');
        const concepto2 = $('#concepto2');
        const concepto3 = $('#concepto3');
        const concepto4 = $('#concepto4');
        const concepto5 = $('#concepto5');
        const retroP = $('#retroP');

        const retroN = $('#retroN');
        const btnReintentar = $('#btnReintentar');
        
        let errorescancelacion = 0;
        let letrascancelacion = 0;
        let cancelacion = true;
        const cancelacionA = $('#cancelacionA');
        const cancelacionN = $('#cancelacionN');
        const cancelacionL = $('#cancelacionL');
        const cancelacionC = $('#cancelacionC');
        const vacia1_1 = $('#vacia1_1');
        const vacia1_2 = $('#vacia1_2');
        const vacia1_3 = $('#vacia1_3');
        const vacia1_4 = $('#vacia1_4');
        const vacia1_5 = $('#vacia1_5');
        const vacia1_6 = $('#vacia1_6');

        let erroresrectificacion = 0;
        let letrasrectificacion = 0;
        let rectificacion = true;
        const rectificacionA = $('#rectificacionA');
        const rectificacionC = $('#rectificacionC');
        const rectificacionF = $('#rectificacionF');
        const rectificacionR = $('#rectificacionR');
        const rectificacionT = $('#rectificacionT');
        const vacia2_1 = $('#vacia2_1');
        const vacia2_2 = $('#vacia2_2');
        const vacia2_3 = $('#vacia2_3');
        const vacia2_4 = $('#vacia2_4');
        const vacia2_5 = $('#vacia2_5');
        const vacia2_6 = $('#vacia2_6');

        let erroresoposicion = 0;
        let letrasoposicion = 0;
        let oposicion = true;
        const oposicionI = $('#oposicionI');
        const oposicionO = $('#oposicionO');
        const oposicionS = $('#oposicionS');
        const vacia3_1 = $('#vacia3_1');
        const vacia3_2 = $('#vacia3_2');
        const vacia3_3 = $('#vacia3_3');
        const vacia3_4 = $('#vacia3_4');

        let erroresacceso = 0;
        let letrasacceso = 0;
        let acceso = true;
        const accesoA = $('#accesoA');
        const accesoC = $('#accesoC');
        const accesoE = $('#accesoE');
        const accesoO = $('#accesoO');
        const accesoS = $('#accesoS');
        const vacia4_1 = $('#vacia4_1');
        const vacia4_2 = $('#vacia4_2');
        const vacia4_3 = $('#vacia4_3');
        const vacia4_4 = $('#vacia4_4');
        const vacia4_5 = $('#vacia4_5');

        let aciertos = 0;

        jQuery(function($){ 
            cargando(iniciarPagina);
        });

        const iniciarPagina = ()=>{
            aplicacion.reproducirAudio(audio[0], decirFrase, 1);
            animacionEntrada(titulo, 'izquierda-derecha', 1);
            animacionEntrada(instrucciones, 'derecha-izquierda', 1);
            animacionEntrada(frase1, 'izquierda-derecha', 1);
            animacionEntrada(casillas1, 'arriba-abajo', 1);
            animacionEntrada(vacia1_1, 'arriba-abajo', 1);
            animacionEntrada(vacia1_2, 'arriba-abajo', 1);
            animacionEntrada(vacia1_3, 'arriba-abajo', 1);
            animacionEntrada(vacia1_4, 'arriba-abajo', 1);
            animacionEntrada(vacia1_5, 'arriba-abajo', 1);
            animacionEntrada(vacia1_6, 'arriba-abajo', 1);
            animacionEntrada(marco, 'arriba-abajo', 1);
            animacionEntrada(base, 'arriba-abajo', 1);
        }

        const decirFrase = ()=>{
            aplicacion.reproducirAudio(audio[1], completar1, 1);
        }

        const completar1 = ()=>{
            parpadea(vacia1_1);
            parpadea(vacia1_2);
            parpadea(vacia1_3);
            parpadea(vacia1_4);
            parpadea(vacia1_5);
            parpadea(vacia1_6);

            $(document).keydown(function(event) {
                
                if(cancelacion){
                    if(String.fromCharCode(event.which) === 'A'){
                        animacionEntrada(cancelacionA, 'default', .5);
                        pararParpadear(vacia1_2);
                        pararParpadear(vacia1_6);
                        letrascancelacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'C'){
                        animacionEntrada(cancelacionC, 'default', .5);
                        pararParpadear(vacia1_1);
                        pararParpadear(vacia1_4);
                        letrascancelacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'N'){
                        animacionEntrada(cancelacionN, 'default', .5);
                        pararParpadear(vacia1_3);
                        letrascancelacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'L'){
                        animacionEntrada(cancelacionL, 'default', .5);
                        pararParpadear(vacia1_5);
                        letrascancelacion++;
                    }
                    else{
                        errorescancelacion++;
                        
                        switch(errorescancelacion){
                            case 1:
                                animacionEntrada(cabeza1, 'default', 1);
                                break;
                            case 2:
                                animacionEntrada(cuerpo1, 'default', 1);
                                break;
                            case 3:
                                animacionEntrada(brazo1_1, 'default', 1);
                                break;
                            case 4:
                                animacionEntrada(brazo2_1, 'default', 1);
                                break;
                            case 5:
                                animacionEntrada(pierna1_1, 'default', 1);
                                break;
                            case 6:
                                animacionEntrada(pierna2_1, 'default', 1);
                                break;
                            default:
                                break;
                        }
                    }
                }

                if(errorescancelacion == 6 || letrascancelacion == 4){
                    setTimeout(()=>{
                        animacionSalida(frase1, 'default', 1, 3);
                        animacionSalida(casillas1, 'default', 1, 3);
                        animacionSalida(cabeza1, 'default', 1);
                        animacionSalida(brazo1_1, 'default', 1);
                        animacionSalida(brazo2_1, 'default', 1);
                        animacionSalida(pierna1_1, 'default', 1);
                        animacionSalida(pierna2_1, 'default', 1);
                        animacionSalida(cuerpo1, 'default', 1);
                        animacionSalida(cancelacionA, 'default', 1, 3);
                        animacionSalida(cancelacionC, 'default', 1, 3);
                        animacionSalida(cancelacionL, 'default', 1, 3);
                        animacionSalida(cancelacionN, 'default', 1, 3);
                        animacionSalida(vacia1_1, 'default', 1, 3);
                        animacionSalida(vacia1_2, 'default', 1, 3);
                        animacionSalida(vacia1_3, 'default', 1, 3);
                        animacionSalida(vacia1_4, 'default', 1, 3);
                        animacionSalida(vacia1_5, 'default', 1, 3);
                        animacionSalida(vacia1_6, 'default', 1, 3);
                        if(letrascancelacion == 4){
                            aciertos++;
                            
                        }
                        salidaCompletar1();
                    }, 2000);
                }                    
            }); 
        }

        const salidaCompletar1 = ()=>{
            cancelacion = false;
            animacionEntrada(frase2, 'izquierda-derecha', 1, 4);
            animacionEntrada(casillas2, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia2_1, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia2_2, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia2_3, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia2_4, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia2_5, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia2_6, 'arriba-abajo', 1, 4);
            
            setTimeout(()=>{
                parpadea(vacia2_1);
                parpadea(vacia2_2);
                parpadea(vacia2_3);
                parpadea(vacia2_4);
                parpadea(vacia2_5);
                parpadea(vacia2_6);
            }, 5000);

            $(document).off('keydown');
            completar2();
        }

        const completar2 = ()=>{
            $(document).keydown(function(event) {
                
                if(rectificacion){
                    if(String.fromCharCode(event.which) === 'A'){
                        pararParpadear(vacia2_6);
                        animacionEntrada(rectificacionA, 'default', .5);
                        letrasrectificacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'C'){
                        pararParpadear(vacia2_2);
                        pararParpadear(vacia2_5);
                        animacionEntrada(rectificacionC, 'default', .5);
                        letrasrectificacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'F'){
                        pararParpadear(vacia2_4);
                        animacionEntrada(rectificacionF, 'default', .5);
                        letrasrectificacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'R'){
                        animacionEntrada(rectificacionR, 'default', .5);
                        pararParpadear(vacia2_1);
                        letrasrectificacion++;
                    }
                    else if(String.fromCharCode(event.which) === 'T'){
                        pararParpadear(vacia2_3);
                        animacionEntrada(rectificacionT, 'default', .5);
                        letrasrectificacion++;
                    }
                    else{
                        erroresrectificacion++;
                        
                        switch(erroresrectificacion){
                            case 1:
                                animacionEntrada(cabeza2, 'default', 1);
                                break;
                            case 2:
                                animacionEntrada(cuerpo2, 'default', 1);
                                break;
                            case 3:
                                animacionEntrada(brazo1_2, 'default', 1);
                                break;
                            case 4:
                                animacionEntrada(brazo2_2, 'default', 1);
                                break;
                            case 5:
                                animacionEntrada(pierna1_2, 'default', 1);
                                break;
                            case 6:
                                animacionEntrada(pierna2_2, 'default', 1);
                                break;
                            default:
                                break;
                        }
                    }
                }

                if(erroresrectificacion == 6 || letrasrectificacion == 5){
                    setTimeout(()=>{
                        animacionSalida(frase2, 'default', 1, 3);
                        animacionSalida(casillas2, 'default', 1, 3);
                        animacionSalida(cabeza2, 'default', 1);
                        animacionSalida(brazo1_2, 'default', 1);
                        animacionSalida(brazo2_2, 'default', 1);
                        animacionSalida(pierna1_2, 'default', 1);
                        animacionSalida(pierna2_2, 'default', 1);
                        animacionSalida(cuerpo2, 'default', 1);
                        animacionSalida(rectificacionA, 'default', 1, 3);
                        animacionSalida(rectificacionC, 'default', 1, 3);
                        animacionSalida(rectificacionF, 'default', 1, 3);
                        animacionSalida(rectificacionR, 'default', 1, 3);
                        animacionSalida(rectificacionT, 'default', 1, 3);
                        animacionSalida(vacia2_1, 'default', 1, 3);
                        animacionSalida(vacia2_2, 'default', 1, 3);
                        animacionSalida(vacia2_3, 'default', 1, 3);
                        animacionSalida(vacia2_4, 'default', 1, 3);
                        animacionSalida(vacia2_5, 'default', 1, 3);
                        animacionSalida(vacia2_6, 'default', 1, 3);
                        if(letrasrectificacion == 5){
                            aciertos++;
                            
                        }
                        salidaCompletar2();
                    }, 2000);
                }                    
            }); 
        }

        const salidaCompletar2 = ()=>{
            rectificacion = false;
            animacionEntrada(frase3, 'izquierda-derecha', 1, 4);
            animacionEntrada(casillas3, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia3_1, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia3_2, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia3_3, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia3_4, 'arriba-abajo', 1, 4);
            setTimeout(()=>{
                parpadea(vacia3_1);
                parpadea(vacia3_2);
                parpadea(vacia3_3);
                parpadea(vacia3_4);
            }, 5000);
            $(document).off('keydown');
            completar3();
        }

        const completar3 = ()=>{
            $(document).keydown(function(event) {
                
                if(oposicion){
                    if(String.fromCharCode(event.which) === 'I'){
                        pararParpadear(vacia3_4);
                        animacionEntrada(oposicionI, 'default', .5);
                        letrasoposicion++;
                    }
                    else if(String.fromCharCode(event.which) === 'O'){
                        pararParpadear(vacia3_1);
                        pararParpadear(vacia3_2);
                        animacionEntrada(oposicionO, 'default', .5);
                        letrasoposicion++;
                    }
                    else if(String.fromCharCode(event.which) === 'S'){
                        pararParpadear(vacia3_3);
                        animacionEntrada(oposicionS, 'default', .5);
                        letrasoposicion++;
                    }
                    else{
                        erroresoposicion++;
                        
                        switch(erroresoposicion){
                            case 1:
                                animacionEntrada(cabeza3, 'default', 1);
                                break;
                            case 2:
                                animacionEntrada(cuerpo3, 'default', 1);
                                break;
                            case 3:
                                animacionEntrada(brazo1_3, 'default', 1);
                                break;
                            case 4:
                                animacionEntrada(brazo2_3, 'default', 1);
                                break;
                            case 5:
                                animacionEntrada(pierna1_3, 'default', 1);
                                break;
                            case 6:
                                animacionEntrada(pierna2_3, 'default', 1);
                                break;
                            default:
                                break;
                        }
                    }
                }

                if(erroresoposicion == 6 || letrasoposicion == 3){
                    setTimeout(()=>{
                        animacionSalida(frase3, 'default', 1, 3);
                        animacionSalida(casillas3, 'default', 1, 3);
                        animacionSalida(cabeza3, 'default', 1);
                        animacionSalida(brazo1_3, 'default', 1);
                        animacionSalida(brazo2_3, 'default', 1);
                        animacionSalida(pierna1_3, 'default', 1);
                        animacionSalida(pierna2_3, 'default', 1);
                        animacionSalida(cuerpo3, 'default', 1);
                        animacionSalida(oposicionI, 'default', 1, 3);
                        animacionSalida(oposicionO, 'default', 1, 3);
                        animacionSalida(oposicionS, 'default', 1, 3);
                        animacionSalida(vacia3_1, 'default', 1, 3);
                        animacionSalida(vacia3_2, 'default', 1, 3);
                        animacionSalida(vacia3_3, 'default', 1, 3);
                        animacionSalida(vacia3_4, 'default', 1, 3);
                        pararParpadear(vacia4_1);
                        if(letrasoposicion == 3){
                            aciertos++
                            
                        }
                        salidaCompletar3();
                    }, 2000);
                }                    
            }); 
        }

        const salidaCompletar3 = ()=>{
            oposicion = false;
            animacionEntrada(frase4, 'izquierda-derecha', 1, 4);
            animacionEntrada(casillas4, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia4_1, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia4_2, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia4_3, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia4_4, 'arriba-abajo', 1, 4);
            animacionEntrada(vacia4_5, 'arriba-abajo', 1, 4);
            setTimeout(()=>{
                parpadea(vacia4_1);
                parpadea(vacia4_2);
                parpadea(vacia4_3);
                parpadea(vacia4_4);
                parpadea(vacia4_5);
            }, 5000);
            $(document).off('keydown');
            completar4();
        }

        const completar4 = ()=>{
            $(document).keydown(function(event) {
                
                if(acceso){
                    if(String.fromCharCode(event.which) === 'A'){
                        pararParpadear(vacia4_1);
                        animacionEntrada(accesoA, 'default', .5);
                        letrasacceso++;
                    }
                    else if(String.fromCharCode(event.which) === 'C'){
                        pararParpadear(vacia4_2);
                        animacionEntrada(accesoC, 'default', .5);
                        letrasacceso++;
                    }
                    else if(String.fromCharCode(event.which) === 'E'){
                        pararParpadear(vacia4_3);
                        animacionEntrada(accesoE, 'default', .5);
                        letrasacceso++;
                    }
                    else if(String.fromCharCode(event.which) === 'O'){
                        pararParpadear(vacia4_5);
                        animacionEntrada(accesoO, 'default', .5);
                        letrasacceso++;
                    }
                    else if(String.fromCharCode(event.which) === 'S'){
                        pararParpadear(vacia4_4);
                        animacionEntrada(accesoS, 'default', .5);
                        letrasacceso++;
                    }
                    else{
                        erroresacceso++;
                        
                        switch(erroresacceso){
                            case 1:
                                animacionEntrada(cabeza4, 'default', 1);
                                break;
                            case 2:
                                animacionEntrada(cuerpo4, 'default', 1);
                                break;
                            case 3:
                                animacionEntrada(brazo1_4, 'default', 1);
                                break;
                            case 4:
                                animacionEntrada(brazo2_4, 'default', 1);
                                break;
                            case 5:
                                animacionEntrada(pierna1_4, 'default', 1);
                                break;
                            case 6:
                                animacionEntrada(pierna2_4, 'default', 1);
                                break;
                            default:
                                break;
                        }
                    }
                }

                if(erroresacceso == 6 || letrasacceso == 5){
                    setTimeout(()=>{
                        animacionSalida(frase4, 'default', 1, 3);
                        animacionSalida(casillas4, 'default', 1, 3);
                        animacionSalida(cabeza4, 'default', 1);
                        animacionSalida(brazo1_4, 'default', 1);
                        animacionSalida(brazo2_4, 'default', 1);
                        animacionSalida(pierna1_4, 'default', 1);
                        animacionSalida(pierna2_4, 'default', 1);
                        animacionSalida(cuerpo4, 'default', 1);
                        animacionSalida(accesoA, 'default', 1, 3);
                        animacionSalida(accesoC, 'default', 1, 3);
                        animacionSalida(accesoS, 'default', 1, 3);
                        animacionSalida(accesoE, 'default', 1, 3);
                        animacionSalida(accesoO, 'default', 1, 3);
                        animacionSalida(vacia4_1, 'default', 1, 3);
                        animacionSalida(vacia4_2, 'default', 1, 3);
                        animacionSalida(vacia4_3, 'default', 1, 3);
                        animacionSalida(vacia4_4, 'default', 1, 3);
                        animacionSalida(vacia4_5, 'default', 1, 3);
                        
                        if(letrasacceso == 5){
                            aciertos++;
                            
                        }
                        salidaCompletar4();
                    }, 2000);
                }                    
            }); 
        }

        const salidaCompletar4 = ()=>{
            acceso = false;
            $(document).off('keydown');
            animacionSalida(marco, 'default', 1, 3);
            animacionSalida(instrucciones, 'default', 1, 3);
            animacionSalida(base, 'default', 1, 3);
            if(aciertos == 4){
                retroPositiva();
            }
            else{
                retroNegativa();
            }
        }

        const retroPositiva = ()=>{
            aplicacion.reproducirAudio(audio[2], c2, 4000);
            animacionEntrada(positiva, 'arriba-abajo', 1, 4);
            animacionEntrada(concepto1, 'derecha-izquierda', 1, 4);
        }

        const c2 = ()=>{
            aplicacion.reproducirAudio(audio[3], c3, 1)
            animacionEntrada(concepto2, 'derecha-izquierda', 1);
        }

        const c3 = ()=>{
            aplicacion.reproducirAudio(audio[4], c4, 1)
            animacionEntrada(concepto3, 'derecha-izquierda', 1);
        }

        const c4 = ()=>{
            aplicacion.reproducirAudio(audio[5], retroFinal, 1)
            animacionEntrada(concepto4, 'derecha-izquierda', 1);
        }

        const retroFinal = ()=>{
            aplicacion.reproducirAudio(audio[6], final, 1)
            animacionEntrada(retroP, 'derecha-izquierda', 1);
        }

        const final = ()=>{
            aplicacion.terminaPantalla();
        }

        const retroNegativa = ()=>{
            aplicacion.reproducirAudio(audio[7], reintentar, 3000);
            animacionEntrada(retroN, 'arriba-abajo', 1, 3);
        }

        const reintentar = ()=>{
            parpadea(btnReintentar);
        }

        btnReintentar.click(function(){
            aplicacion.recargarPag();
        });

    </script>

    <!-- Termina Script -->
</body>
</html>